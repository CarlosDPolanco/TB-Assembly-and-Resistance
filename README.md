# TB-Assembly-and-Resistance
# tb-genomics-pipeline ğŸ§«ğŸ§¬  
An end-to-end pipeline for downloading SRA datasets, performing quality control, trimming, genome assembly, renaming FASTA files, and running **TB-Profiler** to generate drug-resistance and lineage reports for *Mycobacterium tuberculosis* genomes.

This workflow integrates all stepsâ€”from raw SRA accessions to full genomic profilingâ€”into a single automated process.

---

## ğŸ” Workflow Overview

### **1. SRA Download & FASTQ Conversion**  
**Script:** `Download SRAs.sh`  
Downloads SRA accessions using `prefetch`, converts them to FASTQ using `fasterq-dump`, and removes temporary files.

### **2. Quality Control, Trimming & Genome Assembly**  
**Script:** `Quality and assembly.sh`  
Runs FastQC, MultiQC, Trimmomatic, assembles genomes with SPAdes, and exports the final contigs.

### **3. Assembly Renaming**  
**Script:** `AddIndex.sh`  
Renames FASTA files based on a custom ID table (`IDlist.txt`) to enforce consistent naming.

### **4. Drug-Resistance Profiling (TB-Profiler)**  
**Script:** `Lineage and Resistance.sh`  
Profiles each assembled genome using TB-Profiler and generates lineage, variant, and resistance reports.

---

## ğŸ“ Directory Structure

  - `fastq_data/` # Downloaded FASTQ files
  - `fastqc_reports/` # Pre-trimming FastQC reports
  - `trimming_reports/` # Post-trimming FastQC reports
  - `trimmed_reads/` # Filtered paired-end reads
  - `spades_output/` # Temporary SPAdes output directories
  - `fasta_data/` # Final genome assemblies (*.fasta)
  - `tb-<ID>/` # Output folders generated by TB-Profiler


Additional input files:

- `sra_list.txt` â†’ list of SRA accessions  
- `IDlist.txt` â†’ mapping file (SRR â†’ custom ID)  
- `success.txt` â†’ assembly success log  

---

## âš™ï¸ Requirements

This pipeline requires:

- **sra-tools** (prefetch, fasterq-dump)  
- **fastqc**  
- **multiqc**  
- **trimmomatic**  
- **spades**  
- **tb-profiler**

## ğŸ“Œ Notes

  - Adjust the number of threads via the THREADS variable in Quality and assembly.sh.
  - You may optionally remove original FASTQ files to save storage.
  - Replace TruSeq3-PE.fa if you use different adapter sequences.
  - The workflow can be extended with polishing tools (e.g., Pilon) or assembly evaluation tools (e.g., QUAST).

